{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../profile.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction UploadViewComponent_div_31_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 23);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\")(4, \"div\", 1)(5, \"div\", 2)(6, \"div\", 3);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 4)(9, \"form\", 5);\n    i0.ɵɵlistener(\"ngSubmit\", function UploadViewComponent_div_31_div_1_Template_form_ngSubmit_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const exp_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.onAddProjectSubmit(exp_r2._id));\n    });\n    i0.ɵɵelementStart(10, \"div\", 6)(11, \"label\", 7);\n    i0.ɵɵtext(12, \"Project Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"input\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 9)(15, \"label\", 7);\n    i0.ɵɵtext(16, \"Project Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"input\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 9)(19, \"label\", 7);\n    i0.ɵɵtext(20, \"Project Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(21, \"textarea\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 12)(23, \"label\", 13);\n    i0.ɵɵtext(24, \"Project renders\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"input\", 14);\n    i0.ɵɵlistener(\"change\", function UploadViewComponent_div_31_div_1_Template_input_change_25_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.onFileChange($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\", 15)(27, \"button\", 16);\n    i0.ɵɵlistener(\"change\", function UploadViewComponent_div_31_div_1_Template_button_change_27_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const exp_r2 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.onAddProjectSubmit(exp_r2._id));\n    });\n    i0.ɵɵtext(28, \"SUBMIT \");\n    i0.ɵɵelementEnd()()()()()()()();\n  }\n  if (rf & 2) {\n    const exp_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", exp_r2.company_name, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" Add new Project to \", exp_r2.company_name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.newProjectData);\n  }\n}\nfunction UploadViewComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, UploadViewComponent_div_31_div_1_Template, 29, 3, \"div\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.ListofExperiences);\n  }\n}\nexport let UploadViewComponent = /*#__PURE__*/(() => {\n  var _class;\n  class UploadViewComponent {\n    constructor(fb, profileService, _route) {\n      this.fb = fb;\n      this.profileService = profileService;\n      this._route = _route;\n      this.rendersUploaded = [];\n      this.ListofExperiences = [];\n      this.newProjectData = this.fb.group({\n        project_name: [''],\n        project_type: [''],\n        project_description: [''],\n        project_files: ['']\n      });\n      this.newExperienceData = this.fb.group({\n        company_name: [''],\n        company_designation: [''],\n        company_description: ['']\n      });\n    }\n    ngOnInit() {}\n    onFileChange(event) {\n      if (event.target.files && event.target.files[0]) {\n        const files = event.target.files;\n        for (let i = 0; i < files.length; i++) {\n          this.rendersUploaded.push(files[i]);\n        }\n      }\n    }\n    onProjectSubmit() {\n      const formData = new FormData();\n      formData.append('project_name', this.newProjectData.get('project_name').value);\n      formData.append('project_type', this.newProjectData.get('project_type').value);\n      formData.append('project_description', this.newProjectData.get('project_description').value);\n      for (let i = 0; i < this.rendersUploaded.length; i++) {\n        formData.append('project_files[]', this.rendersUploaded[i]);\n      }\n      this.profileService.postProjects(formData).subscribe(res => {\n        console.log(res);\n        this._route.navigate(['/']);\n      }, err => console.log(err));\n    }\n    onExperienceSubmit() {\n      this.profileService.postExperience(this.newExperienceData.value).subscribe(res => {\n        console.log(res);\n        alert(\"Experience upload successful\");\n        this._route.navigate(['/']);\n      }, err => console.log(err));\n    }\n    fetchExperiences() {\n      this.profileService.getCompanies().subscribe(res => {\n        this.ListofExperiences = res;\n      }, err => console.log(err));\n    }\n    onAddProjectSubmit(exp_id) {\n      const formData = new FormData();\n      formData.append('project_name', this.newProjectData.get('project_name').value);\n      formData.append('project_type', this.newProjectData.get('project_type').value);\n      formData.append('project_description', this.newProjectData.get('project_description').value);\n      for (let i = 0; i < this.rendersUploaded.length; i++) {\n        formData.append('project_files[]', this.rendersUploaded[i]);\n      }\n      this.profileService.patchExpProjects(formData, exp_id).subscribe(res => {\n        console.log(res);\n        this._route.navigate(['/']);\n      }, err => console.log(err));\n    }\n  }\n  _class = UploadViewComponent;\n  _class.ɵfac = function UploadViewComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ProfileService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-upload-view\"]],\n    decls: 55,\n    vars: 3,\n    consts: [[1, \"bg-danger\"], [1, \"container\", \"mt-5\"], [1, \"card\", \"rounded-5\", \"px-3\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"\", 1, \"pb-2\"], [\"type\", \"text\", \"formControlName\", \"project_name\", \"required\", \"\", 1, \"form-control\", \"rounded-5\"], [1, \"form-group\", \"mt-3\"], [\"type\", \"text\", \"formControlName\", \"project_type\", \"required\", \"\", 1, \"form-control\", \"rounded-5\"], [\"type\", \"text\", \"rows\", \"10\", \"formControlName\", \"project_description\", \"required\", \"\", 1, \"form-control\", \"rounded-5\"], [1, \"mb-3\", \"mt-3\"], [\"for\", \"formFile\", 1, \"form-label\"], [\"type\", \"file\", \"multiple\", \"\", \"id\", \"formFile\", \"formControlName\", \"project_files\", \"required\", \"\", 1, \"form-control\", 3, \"change\"], [1, \"mt-3\"], [1, \"btn\", \"btn-primary\", \"ms-auto\", 3, \"change\"], [1, \"btn\", \"btn-warning\", \"my-3\", 3, \"click\"], [4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"company_name\", \"required\", \"\", 1, \"form-control\", \"rounded-5\"], [\"type\", \"text\", \"formControlName\", \"company_designation\", \"required\", \"\", 1, \"form-control\", \"rounded-5\"], [\"type\", \"text\", \"rows\", \"5\", \"formControlName\", \"company_description\", \"required\", \"\", 1, \"form-control\", \"rounded-5\"], [4, \"ngFor\", \"ngForOf\"], [1, \"\"]],\n    template: function UploadViewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h4\", 0);\n        i0.ɵɵtext(1, \"Upload page\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"h5\", 0);\n        i0.ɵɵtext(3, \" Personal Projects Upload\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 1)(5, \"div\", 2)(6, \"div\", 3);\n        i0.ɵɵtext(7, \" Upload your Project \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 4)(9, \"form\", 5);\n        i0.ɵɵlistener(\"ngSubmit\", function UploadViewComponent_Template_form_ngSubmit_9_listener() {\n          return ctx.onProjectSubmit();\n        });\n        i0.ɵɵelementStart(10, \"div\", 6)(11, \"label\", 7);\n        i0.ɵɵtext(12, \"Project Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"input\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 9)(15, \"label\", 7);\n        i0.ɵɵtext(16, \"Project Type\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"input\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 9)(19, \"label\", 7);\n        i0.ɵɵtext(20, \"Project Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"textarea\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 12)(23, \"label\", 13);\n        i0.ɵɵtext(24, \"Project renders\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"input\", 14);\n        i0.ɵɵlistener(\"change\", function UploadViewComponent_Template_input_change_25_listener($event) {\n          return ctx.onFileChange($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 15)(27, \"button\", 16);\n        i0.ɵɵlistener(\"change\", function UploadViewComponent_Template_button_change_27_listener() {\n          return ctx.onProjectSubmit();\n        });\n        i0.ɵɵtext(28, \"SUBMIT \");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(29, \"button\", 17);\n        i0.ɵɵlistener(\"click\", function UploadViewComponent_Template_button_click_29_listener() {\n          return ctx.fetchExperiences();\n        });\n        i0.ɵɵtext(30, \"Update Experience\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(31, UploadViewComponent_div_31_Template, 2, 1, \"div\", 18);\n        i0.ɵɵelementStart(32, \"h5\");\n        i0.ɵɵtext(33, \" Work experience Upload\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"div\", 1)(35, \"div\", 2)(36, \"div\", 3);\n        i0.ɵɵtext(37, \" Upload your Work Experience \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"div\", 4)(39, \"form\", 5);\n        i0.ɵɵlistener(\"ngSubmit\", function UploadViewComponent_Template_form_ngSubmit_39_listener() {\n          return ctx.onExperienceSubmit();\n        });\n        i0.ɵɵelementStart(40, \"div\", 6)(41, \"label\", 7);\n        i0.ɵɵtext(42, \"company Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"input\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"div\", 9)(45, \"label\", 7);\n        i0.ɵɵtext(46, \"company_designation\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(47, \"input\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"div\", 9)(49, \"label\", 7);\n        i0.ɵɵtext(50, \"company Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(51, \"textarea\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"div\", 15)(53, \"button\", 16);\n        i0.ɵɵlistener(\"change\", function UploadViewComponent_Template_button_change_53_listener() {\n          return ctx.onExperienceSubmit();\n        });\n        i0.ɵɵtext(54, \"SUBMIT \");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"formGroup\", ctx.newProjectData);\n        i0.ɵɵadvance(22);\n        i0.ɵɵproperty(\"ngIf\", ctx.ListofExperiences);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formGroup\", ctx.newExperienceData);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName]\n  });\n  return UploadViewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}